/** Copyright (c) 2008-2010 Martin Krause (jquery.public.mkrause.info)-  Dual licensed under the MIT and GPL licenses. */
(function(c){c.fn.jStyrofoam=function(e){var f=c.extend({},c.fn.jStyrofoam.oDefaults,e);return this.each(function(){var g=c(this);var h=g.attr("id");if(!h||h===null||h=="null"){h=g.attr("id","jStyrofoam-"+new Date().getTime()).attr("id")}c.fn.jStyrofoam.TEMP_ID=h;c.fn.jStyrofoam._STORAGE[h]={};c.fn.jStyrofoam._STORAGE[h].oOptions=f;c.fn.jStyrofoam._STORAGE[h].oOptions.sIdCollection=h;c.fn.jStyrofoam._STORAGE[h].oOptions.$eljStyrofoam=g;c.fn.jStyrofoam._STORAGE[h].elements={};g.css("height",g.outerHeight());var i=g.css("position");jQuery.fn.jStyrofoam.reversePositionAbsolute(g.css("position",(i==="static"?"relative":i)).find(" ."+f.sClassNameTrigger).bind("click.jStyrofoam",{sIdCollection:h},c.fn.jStyrofoam.click).end().find(f.sElement).each(function(j){c(this).attr("id","jStyrofoam-"+h+"-"+j)}));c.fn.jStyrofoam.TEMP_ID=null})};function a(e){e.each(function(h,g){var f=jQuery(g);var i=d(f.attr("id"));var j=c.fn.jStyrofoam._STORAGE[i.id].elements[i.eId];f.css("opacity",1).animate({left:j.left,top:j.top},{queue:false}).fadeOut("normal")})}function d(e){return{eId:e,id:e.split("jStyrofoam-")[1].split("-")[0]}}function b(l,h){var n=l.attr("rel");var m=c.fn.jStyrofoam._STORAGE[h];var j=m.sActiveSelector;if(j==n){return false}jQuery("#"+m.oOptions.sIdCollection+" ."+m.oOptions.sClassNameTrigger).removeClass(m.oOptions.sClassNameActive);l.addClass(m.oOptions.sClassNameActive);c.fn.jStyrofoam._STORAGE[h].sActiveSelector=n;var k=m.oOptions;var i=k.iElementWidth;var p=k.iElementHeight;var o=k.iElementsPerRow;var e=k.$eljStyrofoam;var g=0;var f=e.find([k.sElement,'[class*="',n,'"]'].join(""));f.stop(true);a(e.find(k.sElement).not(['[class*="',n,'"]'].join("")).stop(true));f.each(function(s,r){var q=jQuery(r);var t=d(q.attr("id"));var v=c.fn.jStyrofoam._STORAGE[t.id].elements[t.eId];var u=parseInt(q.attr("class").split(n)[1].split(" ")[0]);if(q.is(":visible")){q.css({opacity:1})}else{q.css({opacity:0,left:v.left,top:v.top})}q.fadeIn("normal").animate({opacity:1,left:i*((u-1)%o),top:p*((Math.ceil(u/o))-1)},{queue:false})});return false}c.fn.jStyrofoam.click=function(e){c.fn.jStyrofoam.beforeClickAnimation(e);b(jQuery(e.target),(e.data.sIdCollection));c.fn.jStyrofoam.afterClickAnimation(e);return false};c.fn.jStyrofoam.beforeClickAnimation=function(e){};c.fn.jStyrofoam.afterClickAnimation=function(e){};c.fn.jStyrofoam.reversePositionAbsolute=function(e){jQuery(e.get().reverse()).each(function(i,h){var g=jQuery(h);var f=g.position();c.fn.jStyrofoam._STORAGE[c.fn.jStyrofoam.TEMP_ID].elements[g.attr("id")]={left:f.left,top:f.top};jQuery(h).css({top:f.top,left:f.left,position:"absolute","float":"none"})})};c.fn.jStyrofoam._STORAGE={};c.fn.jStyrofoam.oDefaults={iElementWidth:160,iElementHeight:110,iElementsPerRow:5,sElement:".toFilter li",sClassNameTrigger:"action",sClassNameActive:"active"}})(jQuery);